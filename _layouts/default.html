<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
        {% if page.title %}{{ page.title }} — {% endif %}{{ site.title }}
    </title>
    <meta name="description" content="{{ page.description | default: site.description }}" />

    <!-- HEAD -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@uswds/uswds@3.7.1/dist/css/uswds.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@uswds/uswds@3.7.1/dist/js/uswds-init.min.js"></script>
    <link rel="stylesheet" href="{{ '/assets/css/site.css' | relative_url }}" />
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    <link rel="icon" type="image/x-icon" href="{{ '/favicon.ico' | relative_url }}" />

</head>

<body>
    <a class="usa-skipnav" href="#main-content">Skip to main content</a>

    <header class="usa-header usa-header--extended bg-primary-darker">
        <div role="status" aria-live="polite"
            style="background:#fff3cd;color:#856404;border-bottom:1px solid #ffd89f;padding:.45rem 1rem;text-align:center;font-weight:600;">
            ⚠ Under construction — This site is under active development. Some pages may be incomplete.
        </div>
    </header>

    {% include site-header.html %}

    <main id="main-content" class="usa-section" tabindex="-1">
        <div class="container usa-prose">
            {{ content }}
        </div>
    </main>

    <footer class="usa-footer">

        <!-- Full-bleed background row; inner .container keeps content aligned with header/identifier -->
        <div class="usa-footer__secondary-fullwidth">
            <div class="container">
                <div class="usa-footer__secondary-section">
                    <p class="usa-footer__copyright">&copy; {{ site.time | date: '%Y' }} Microsoft Corporation. Licensed
                        under the <a href="{{ '/LICENSE' | relative_url }}">MIT License</a>.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- USWDS Identifier: identifies the parent agency and required federal links -->
    <div class="usa-identifier">
        <div class="usa-identifier__container container">
            <div class="usa-identifier__brand">
                <a class="usa-identifier__logo" href="{{ '/' | relative_url }}">
                    <img class="site-logo" src="{{ '/assets/logo.png' | relative_url }}" alt="{{ site.title }} logo">
                </a>
                <section class="usa-identifier__identity" aria-label="Site identity">
                    <p class="usa-identifier__tagline">This is an open-source project maintained by Microsoft. It is
                        <b>not</b> an official U.S. government website. The site uses the U.S. Web Design System (USWDS)
                        to help agencies and partners create app catalog documentation sites of their own.
                        <a href="https://opensource.microsoft.com/"
                            target="_blank" rel="noopener">Open Source at Microsoft</a>
                    </p>
                </section>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@uswds/uswds@3.7.1/dist/js/uswds.min.js" defer></script>
    <script src="{{ '/assets/js/external-links.js' | relative_url }}" defer></script>

    <!-- Mermaid (client-side) + kramdown shim -->
    <script type="module">
        import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

        // Turn fenced ```mermaid code blocks into <div class="mermaid">…</div>
        function upgradeMermaidBlocks() {
            document.querySelectorAll('pre > code.language-mermaid').forEach(code => {
                const pre = code.parentElement;
                const div = document.createElement('div');
                div.className = 'mermaid';
                div.textContent = code.textContent; // keep raw diagram text
                pre.replaceWith(div);
            });
        }

        const boot = () => {
            upgradeMermaidBlocks();
            mermaid.initialize({ startOnLoad: false }); // we already upgraded; just render
            mermaid.init(undefined, document.querySelectorAll('.mermaid'));
        };

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', boot);
        } else {
            boot();
        }
    </script>

    <!-- Small, non-invasive mobile tweaks: keep skip link focus only (avoid toggling header class) -->
    <script>
        (function () {
            // Ensure skip link focuses the main element on activation (some browsers need tabindex set)
            document.addEventListener('click', function (e) {
                var t = e.target || e.srcElement;
                if (t && t.matches && t.matches('.usa-skipnav')) {
                    var main = document.getElementById('main-content');
                    if (main) {
                        main.setAttribute('tabindex', '-1');
                        main.focus();
                    }
                }
            }, false);
        }());
    </script>

</body>

<script src="{{ '/assets/js/mermaid-stretch.js' | relative_url }}" defer></script>

</html>