---
layout: default
---

<section class="usa-section">
  <div class="grid-container-full">

    <div class="grid-row grid-gap">

      <!-- Sidebar navigation -->

      <aside class="grid-col-12 tablet:grid-col-3">
        <img src="{{ page.thumbnail | relative_url }}" alt="{{ page.title }} app_starter_kit image" class="page-thumbnail">
        <br />
        <nav class="sidenav-sticky" aria-label="Section navigation">
          {% include sidenav.html %}
        </nav>
      </aside>

      <!-- Main content (right side) -->
      <main class="grid-col-12 tablet:grid-col-9 usa-prose">

        <!-- Header row: breadcrumbs + page title -->
        <div class="grid-row grid-gap">
          <div class="grid-col-12 usa-prose">
            {% include breadcrumbs.html %}
          </div>
        </div>

        <!-- Content row: main column + small right column -->
        <div class="grid-row grid-gap">

          <!-- Main column -->
          <div class="grid-col-12 tablet:grid-col-9 usa-prose">

            <h1 class="mgat-solution-heading">{{ page.title }}</h1>
            <hr />

            {% include tabs.html
            ns=page.slug
            tabs="Overview:overview|How-to / Guides:guides|Releases:releases"
            %}

            <!-- OVERVIEW panel -->
            <section id="panel-{{ page.slug }}-overview" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">
              {{ content }}
            </section>

            <!-- RELEASES panel -->
            <section id="panel-{{ page.slug }}-releases" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">
              {% include app_releases.html %}
            </section>

            <!-- GUIDES panel -->
            <section id="panel-{{ page.slug }}-guides" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">
              {% include doclist.html %}
            </section>
          </div>

          <!-- Small right column (download + personas) -->
          <div class="grid-col-12 tablet:grid-col-3">
            {% comment %} latest_release can be a legacy full path OR a version string like "v1.0.0.0". Prefer version lookup, fallback to legacy path, then auto-detect latest release. {% endcomment %}
            {% if page.latest_release %}
              {% assign lr = page.latest_release %}
              {% if lr contains "/" or lr contains "http" or lr contains ".zip" %}
                <!-- legacy full-path kept for compatibility -->
                <a class="usa-button" href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ lr }}" download>Download Latest Release</a>
              {% else %}
                <!-- treat lr as a version string; look up release by parent + version -->
                {% assign rel = site.app_releases | where: "parent", page.slug | where: "version", lr | first %}
                {% if rel and rel.release_file %}
                  <a class="usa-button"
                    href="https://github.com/microsoft/gov-apptemplates/raw/main/federal/{{ rel.parent }}/releases/{{ rel.version }}/{{ rel.release_file }}"
                    download>Download Latest Release</a>
                {% elsif rel and rel.download %}
                  <a class="usa-button" href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ rel.download }}" download>Download Latest Release</a>
                {% else %}
                  {% comment %} fallback: find the latest release by sorting (lexicographic) {% endcomment %}
                  {% assign rels = site.app_releases | where: "parent", page.slug %}
                  {% if rels and rels.size > 0 %}
                    {% assign sorted = rels | sort: "version" %}
                    {% assign latest_rel = sorted | last %}
                    {% if latest_rel.release_file %}
                      <a class="usa-button"
                        href="https://github.com/microsoft/gov-apptemplates/raw/main/federal/{{ latest_rel.parent }}/releases/{{ latest_rel.version }}/{{ latest_rel.release_file }}"
                        download>Download Latest Release</a>
                    {% elsif latest_rel.download %}
                      <a class="usa-button" href="https://github.com/microsoft/gov-apptemplates/raw/main/{{ latest_rel.download }}" download>Download Latest Release</a>
                    {% else %}
                      <div></div>
                    {% endif %}
                  {% else %}
                    <div></div>
                  {% endif %}
                {% endif %}
              {% endif %}
            {% else %}
              <div></div>
            {% endif %}

            {% include related-items.html to="app_starter_kits" %}
            {% include related-items.html to="data_models" %}
            {% include related-items.html to="use_cases" %}
            {% include related-items.html to="personas" %}

          </div>

        </div>

      </main>
    </div>
</section>