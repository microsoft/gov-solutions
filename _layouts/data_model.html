---
layout: default
---

<section class="usa-section">
  <div class="grid-container-full">

    <div class="grid-row grid-gap">

      <!-- Sidebar navigation -->

      <aside class="grid-col-12 tablet:grid-col-3">
        <img src="{{ page.thumbnail | relative_url }}" alt="{{ page.title }} data_model image" class="page-thumbnail">

        {% if page.description %}
          <div class="usa-prose margin-bottom-2">
            {{ page.description }}
          </div>
        {% endif %}
        
        {%- comment -%}
          Show the View ERD button if a mermaid code block is present in the content (from a fenced code block),
          not just if a specific section header or div is present.
        {%- endcomment -%}
        {% assign mermaid_block = page.content | split:'<pre><code class="language-mermaid">' | last | split:'</code></pre>' | first %}
        {% if mermaid_block != page.content %}
          <p class="margin-top-2">
            <button
              type="button"
              class="usa-button usa-button--primary open-erd-modal"
              style="width: 100%"
              data-erd-slug="{{ page.slug }}">
              View ERD
            </button>
          </p>
        {% endif %}

        {% comment %} side navigation listing other data models in the collection (styled) {% endcomment %}
        {% include data-model-sidenav.html %}
      </aside>

      <!-- Main content (right side) -->
      <main class="grid-col-12 tablet:grid-col-9 usa-prose">

        <!-- Header row: breadcrumbs + page title -->
        <div class="grid-row grid-gap">
          <div class="grid-col-12 usa-prose">
            {% include breadcrumbs.html %}
          </div>
        </div>

        <!-- Content row: main column + small right column -->
        <div class="grid-row grid-gap">

          <!-- Main column -->
          <div class="grid-col-12 tablet:grid-col-9 usa-prose">

            <h1 class="mgat-solution-heading">{{ page.title }}</h1>
            <hr />

            {% include tabs.html
            ns=page.slug
            tabs="Overview:overview|Tables and Fields:erd|Releases:releases"
            %}

            <!-- OVERVIEW panel -->
            <section id="panel-{{ page.slug }}-overview" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">
              {{ content }}
            </section>

            <!-- ERD panel -->
            <section id="panel-{{ page.slug }}-erd" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">
              
              {% include tables.html %}

              {%- comment -%}
                Extract the first Mermaid code block from the page content (from a fenced code block),
                and use it for both the modal and the diagram. This allows authors to use regular
                ```mermaid fenced code blocks in markdown, with no front matter or data-raw needed.
              {%- endcomment -%}
              {% assign mermaid_block = content | split:'<pre><code class="language-mermaid">' | last | split:'</code></pre>' | first %}
              {% if mermaid_block != content %}
                <textarea id="erd-mermaid-{{ page.slug }}" style="display:none;">{{ mermaid_block | strip }}</textarea>
              {% endif %}
            </section>

            <!-- RELEASES panel -->
            <section id="panel-{{ page.slug }}-releases" class="mgat-subnav__panel usa-prose" role="tabpanel"
              data-panel="{{ page.slug }}">

              We highly recommend using the managed versions, which will allow you to easily update and uninstall the
              solution from your environment. If you need to modify or enhance the managed solution, you can can create
              a new solution, add the components to that solution and make changes as needed.
              <br />

              {% include data_model_releases.html %}
            </section>

          </div>

          <!-- Small right column (download + personas) -->
          <div class="grid-col-12 tablet:grid-col-3">

            {% if page.latest_release %}
              {% assign lr = page.latest_release %}
              {% assign rel = site.data_model_releases | where: "parent", page.slug | where: "version", lr | first %}
              {% if rel and rel.release_file %}
                <a class="usa-button"
                  href="https://github.com/microsoft/gov-datamodels/raw/refs/heads/main/modules/{{ rel.parent }}/releases/{{ rel.version }}/{{ rel.release_file }}"
                  download>Download Latest Release ({{ rel.version }})</a>
              {% elsif rel and rel.download %}
                <a class="usa-button" href="https://github.com/microsoft/gov-datamodels/raw/refs/heads/main/{{ rel.download }}" download>Download Latest Release ({{ rel.version }})</a>
              {% else %}
                <div></div>
              {% endif %}
            {% else %}
              <div></div>
            {% endif %}

            {% include related-items.html to="data_models" %}
            {% include related-items.html to="use_cases" %}
            {% include related-items.html to="personas" %}
          </div>

        </div>

      </main>
    </div>
</section>

{% comment %} ERD modal (injected per-page) {% endcomment %}
<div id="erd-modal-{{ page.slug }}" class="erd-modal" aria-hidden="true" role="dialog" aria-labelledby="erd-modal-title-{{ page.slug }}" tabindex="-1">
  <div class="erd-modal__backdrop" data-close="true"></div>
  <div class="erd-modal__dialog" role="document">
    <header class="erd-modal__header">
      <h2 id="erd-modal-title-{{ page.slug }}">ERD — {{ page.title }}</h2>
      <button class="erd-modal__close" aria-label="Close ERD" data-close="true">&times;</button>
    </header>
    <div class="erd-modal__content">
      <div class="erd-modal__inner">Loading…</div>
    </div>
  </div>
</div>

<script src="{{ '/assets/js/erd-modal.js' | relative_url }}" defer></script>