{% if page.personas and page.personas.size > 0 %}
<section class="margin-top-4">
    <h2>Personas</h2>
    <div class="personas-buttons" style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
        {% for persona_ref in page.personas %}
        {% assign persona_page = nil %}
        {% assign ref_lc = persona_ref | downcase %}
        {% for candidate in site.personas %}
            {% assign cand_slug = candidate.slug | default: '' | downcase %}
            {% assign cand_basename = candidate.basename | default: '' | downcase %}
            {% assign cand_title = candidate.title | default: '' | downcase %}
            {% if cand_slug == ref_lc or cand_basename == ref_lc or cand_title == ref_lc %}
                {% assign persona_page = candidate %}
                {% break %}
            {% endif %}
        {% endfor %}

        {% if persona_page %}
        <a href="{{ persona_page.url  | relative_url }}" class="usa-link" style="display: block; width: 100%; margin-bottom: 0.5rem;">
            {{ persona_page.title }}
        </a>
        {% else %}
        <a href="#" class="usa-link" style="display: block; width: 100%; margin-bottom: 0.5rem;">
            {{ persona_ref }}
        </a>
        {% endif %}
        {% endfor %}
    </div>
</section>
{% endif %}